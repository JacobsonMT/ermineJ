<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	<title>Program: Class Scoring</title>
	<link rel="stylesheet" href="css/default.css">
</head>

<body bgcolor="#FFFFFF" link="#800000" text="#000000">
<table border="0" cellpadding="2" cellspacing="3" width="776">
<tr>
	<td width="72">
	<!-- Logo space -->
		
		
	</td>
	<td width="687">
	<!-- Header space -->
	<h1>Introduction to the Class Scoring software</h1>
	</td>
</tr>
<tr>
	<td width="72">
	<!-- Left gutter space -->
	<img src="/images/shim.gif" width="70" height="1" border="0" alt="">

	</td>
	<td width="687">
	<!-- main text space -->
	<p>ClassScore is a software tool for generating "functional class scores" based on scores given to individual genes, typically
	from a microarray data set.</p>

	<p>This page describes how to use the graphical user interface (GUI) but
	contains general information relevant to the command line tool as well. There is also
	 command line tool which is very primitive and largely undocumented. T</p>
	
	<h2>Installing the software</h2>
	<p>You must have a recent java runtime (1.4+) installed on your machine. You can get it from <a href="http://java.sun.com/j2se/1.4.1/download.html">Sun</a> but
	there is a good chance it is already installed on your machine.</p>
	
	<p>Once you have a java runtime, just copy the software files to your hard drive in some convenient location.</p>
	
	<p><strong>Note</strong>: You will need at several files besides the data you provide in order to run the analysis. These
	files contain the annotations for GO categories and common microarray designs. You can <a href="annotations.html">download these files</a> from our web site.</p>
	
	<h2>Running the software</h2>
	
	<p>Just double-click on 'classScore.jar'. You may see a plain text 'console' window but shortly a graphical 
	window should appear containing several fields for input. To perform a run, you have to set the fields appropriately and then press "OK". You
	can perform multiple runs without closing and restarting the software. The window should like something like this (we're working
	on the interface, so if it looks a little different, don't be alarmed).</p>
	
	<img src="images/gui2.gif" width="617" height="673" border="0" alt=""><br>
	
	<h2>Inputs</h2>
	<p>The following fields must be set by the user on startup.</p>
	<ul>
	<li><b>Gene Score File</b> <br>
	<img src="images/genescores.gif" width="475" height="39" border="0" alt="">
	 <p>A user-supplied file containing the data. This is a set of gene scores (currently these should
	 be p-values, which the software converts to -log(pvalues)). The first column is the probe id, the second column is the p value. A one-line header
	 is expected.</p></li>
	<li><b>GO Biological Names File</b>:  <br>
	<img src="images/gonames.gif" width="477" height="40" border="0" alt=""><p>A file containing the names of the gene classes. We supply this.</p></li>
	<li><b>Probe to Group Mapping File</b>:  <br><img src="images/replicates.gif" width="497" height="36" border="0" alt=""><p>A file containing a list of the 'duplicates' for the array. This is needed if you use 'weights'. We supply this file.</p></li>
	<li><b>Probe to GO mapping file:</b> <br> <img src="images/goannots.gif" width="499" height="38" border="0" alt=""><p>A file containing a list of the class membership of probes on the array. We supply this.</p></li>
	<li><b>Output File</b>: <br><img src="images/output.gif" width="486" height="42" border="0" alt=""><p>A name of an output file. Your results will be saved to this file.</p></li></ul>
		
	<h2>Options</h2>
	<ul>
	
<li><b>Mean, or Median</b>: <br>

<img src="images/rawscoremethod.gif" width="239" height="72" border="0" alt=""><br>
Choose one method to be used for class scoring. See descriptions
	below for details. Hypergeometric (binomial, actually) p values are always generated as well. Default=mean</li>
	<li><b>Use mean/max/single gene p values</b>:<img src="images/replicatetreatment.gif" width="237" height="132" border="0" alt="">
	
	<p>This refers to how 'replicates' of genes are handled. A replicate is when two probes on an array
	assay the same gene, as indicated in the 'probe to group mapping file'. Default=mean</p></li>
	<ul>
	<li>Count all occurrences separately: Ignores the replicate issue entirely and treats each probe as a separate gene. This can yield inflated (or deflated) class scores
	so normally you won't use this option. (we keep it for experimental purposes)</li>
	

	<li>Use best scoring repliate: If a gene occurs twice (or more) in the data, it is only counted once, and given the score of the
	best-scoring replicate.
	This option is less conservative than using the mean. We use it as the default.</li>
	
		<li>Use mean of replicates: A single value is calculated for all data points representing the gene.
		 This value is the mean of the pvalues for all probes in the group. This option assumes that taking the mean is a sensible thing to do:
		 if you don't log transform your pvalues (by checking the 'log transform' box, explained below), this won't work right.</li>

	</ul>
	
	
	<br>
	<img src="images/params.gif" width="195" height="184" border="0" alt="">
	<li><b>Iterations</b>: This sets the number of random trials which will be used to generate background distributions. 
	The higher you set this, the longer it will take to run, but your p-values may be more precise. We don't suggest setting
	this above 200,000 unless you find you have many classes which have 'maxed out' p values. Default=100,000</li>
	<li><b>Min class size</b>: Classes with fewer genes than this will not be evaluated. Default=4</li>
	<li><b>Max class size</b>: Classes with more genes than this will not be evaluated. Default=150</li>
	<li><b>ORA score threshold</b>: This option sets the gene score which will
	be applied for the binomial distribution p values. Default=0.001 (assuming you are using p values)</li>
	</ul>
	
	
<h2>Ready to run?</h2>
<img src="images/maincontrols.gif" width="431" height="48" border="0" alt="">
<ul>
<li>The "Run analysis" button starts the process of calculating the scores. 
This can take a few minutes especially if you have set a large number of iterations. The status bar will say "Running" once the run
is underway.
</li>
<li>The "Cancel" button will abort your run. The status bar should read "Ready" after you hit cancel.</li>
<li>The "Stop" Button quits the software. This can also be done by clicking on the 'close' box on the window title bar.</li>
</ul>
<p>When the software is done, the status bar will read "Done" and you can open the output file in Excel or a similar software package
to examine it.</p>
	
	<h2>Outputs</h2>
	<ul>
	<li>The output is a text file that contains the results for each class in a simple tabular format. The best-scoring
	classes (based on the resampling-based score) are listed first. The output file can be opened in Excel and sorted etc. easily. The columns are:</li>
	<ul>
	<li><b>class</b> : Name of the class, with the GO id number.</li>
	<li><b>size</b> : How many probes on the array are in the class.</li>
	<li><b>raw score</b> : The raw class statistic based on the selected method. High values are better.</li>
	<li><b>score pval</b> : The p value based on the raw score. Low values are better. Note that p values that would be calculated as zero
	are adjusted to be 1/(2*iterations). Thus if you had 100,000 iterations, the best p value would be 1/(2*100000) or 5x10^-6.
	</li>
	<li><b>effective size</b> : How many unique genes are in the class. This is always less than or equal to the <b>size</b> since some genes are represented
	multiple times on an array. This is the value used in the calculations.</li>
	<li><b>N over pval cut</b>: For overrepresentation analysis, the number of genes which met the criterion set in "ORA score threshold"</li>
	<li><b>hyper pval</b> : p-value for the classed based on the hypergeometric distribution. Note
	that this is actually calcualted using the binomial approximation.</li>
	<li><b>Corrected pva</b>: An experimental feature to apply multiple test correction to the resampling-based class scores.
	The method used is Benjamini-Hochberg's false discovery rate. Rows where this column is 1 meet a FDR criterion of 0.05.</li>
	<li><b>Same as</b>: Lists classes that are identical in the genes they contain to the one listed in the first column.
	Most slots will be blank.</li>
<!--	<li><b>aroc rate</b> : The area under the receiver operator characteristic (AROC).</li>
	<li><b>rocpval</b> : The p-value for the AROC.</li>-->
	</ul>
	
	</li>
	
	</ul>
	
	<hr>
	
</tr>
<tr name="footer">
<td colspan="2" width="766"><img src="/images/shim.gif" width="1" height="10" border="0" alt=""></td>
</tr>
<tr>
<td width="72">
<!-- left gutter psace -->
</td>
<td class="footer" width="687"><a href="mailto:pp175@columbia.edu">Paul Pavlidis</a>.&nbsp; 
<script language="JavaScript" type="text/javascript">
<!--
	document.write("Last Modified " + document.lastModified);
// -->
</script>
</td>
</tr>
</table>

</body>
</html>